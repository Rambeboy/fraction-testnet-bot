const _0x430c71=_0x1a7d;(function(_0x4ece7f,_0x2d04c8){const _0x29f896=_0x1a7d,_0x4e9459=_0x4ece7f();while(!![]){try{const _0x432cdd=-parseInt(_0x29f896(0xc4))/0x1*(parseInt(_0x29f896(0xe4))/0x2)+parseInt(_0x29f896(0x93))/0x3+-parseInt(_0x29f896(0xe3))/0x4*(parseInt(_0x29f896(0xa8))/0x5)+parseInt(_0x29f896(0xc5))/0x6*(parseInt(_0x29f896(0xe2))/0x7)+parseInt(_0x29f896(0xa2))/0x8+-parseInt(_0x29f896(0xbc))/0x9+parseInt(_0x29f896(0xc8))/0xa;if(_0x432cdd===_0x2d04c8)break;else _0x4e9459['push'](_0x4e9459['shift']());}catch(_0x1758d6){_0x4e9459['push'](_0x4e9459['shift']());}}}(_0x425b,0xb5fd5));import{ethers}from'ethers';function _0x1a7d(_0xe9b50c,_0x177b62){const _0x425b38=_0x425b();return _0x1a7d=function(_0x1a7d55,_0x199df8){_0x1a7d55=_0x1a7d55-0x93;let _0x1c4c3d=_0x425b38[_0x1a7d55];return _0x1c4c3d;},_0x1a7d(_0xe9b50c,_0x177b62);}function _0x425b(){const _0x242ae7=['sessionType','includes','Failed\x20to\x20estimate\x20gas\x20after\x20','7445632iWPflp','Starting\x20Matchmarking\x20for\x20Agent\x20','acc','message','agentList','https://dapp-backend-4x.fractionai.xyz/api3/matchmaking/initiate','1185550nbkoMm','Successfully\x20Get\x20Session\x20List','provider','hash','Estimating\x20Gas\x20for\x20','Connected\x20to\x20Fraction\x20AI','Getting\x20User\x20Agent\x20List','connectWallet','solveRef','Successfully\x20Start\x20Matchmarking\x20for\x20Agent\x20','stringify','estimateGasWithRetry','ENTRYFEE','\x20on\x20Session\x20','fromPhrase','\x0aIssued\x20At:\x20','CHAINID','fetch','https://dapp-backend-4x.fractionai.xyz/api3/auth/nonce','length','5510979uAwSRn','token','getOptimalNonce','getAgentList','code','https://dapp-backend-4x.fractionai.xyz/api3/session-types/list/','data','wait','149639hPJwmu','624BgJhYE','https://dapp-backend-4x.fractionai.xyz/api3/agents/user/','Executing\x20TX...','3932250awwkGT','buildTxBody','1.5','sessionList','accessToken','formatEther','getTransactionCount','getSessionList','sendTransaction','toISOString','\x20Proxy','gwei','EXPLORER','GET','Connecting\x20to\x20Account\x20:\x20','latest','wallet','Getting\x20Wallet\x20Balance\x20of\x20','name','\x20attempts.','Connecting\x20to\x20Fraction\x20AI','matchMarking','address','Tx\x20Confirmed\x20and\x20Finalizing:\x20','error','getNonce','48041Gdduxs','4dNaKEK','12QDFAFm','trim','user','signMessage','info','Getting\x20Session\x20List','parseUnits','tx/','signIn','\x20:\x20','1365069OslsxW','Wallet','delay','RPCURL','estimateGas','getBalance','POST','indexOf','https://dapp-backend-4x.fractionai.xyz/api3/auth/verify','balance','Balance\x20updated','Wallet\x20connected\x20'];_0x425b=function(){return _0x242ae7;};return _0x425b();}import{privateKey}from'../../accounts/accounts.js';import{Helper}from'../utils/helper.js';import _0x45c4bd from'../utils/logger.js';import{RPC}from'./network/rpc.js';import{API}from'../api/api.js';import{proxyList}from'../../config/proxy_list.js';import{Config}from'../../config/config.js';export default class Core extends API{constructor(_0xdf76){const _0x26f7a7=_0x1a7d,_0x2a8a2e=privateKey[_0x26f7a7(0x9a)](_0xdf76);if(proxyList['length']!=privateKey[_0x26f7a7(0xbb)]&&proxyList[_0x26f7a7(0xbb)]!=0x0)throw Error('You\x20Have\x20'+privateKey['length']+'\x20Accounts\x20But\x20Provide\x20'+proxyList[_0x26f7a7(0xbb)]+_0x26f7a7(0xd2));const _0x8eabb2=proxyList[_0x2a8a2e];super(_0x8eabb2),this[_0x26f7a7(0xa4)]=_0xdf76,this[_0x26f7a7(0xaa)]=new ethers['JsonRpcProvider'](RPC[_0x26f7a7(0x96)],RPC[_0x26f7a7(0xb8)]);}async[_0x430c71(0xaf)](){const _0x29d9a6=_0x430c71;try{const _0xbdca48=this[_0x29d9a6(0xa4)],_0x118c55=privateKey[_0x29d9a6(0x9a)](this[_0x29d9a6(0xa4)]);await Helper[_0x29d9a6(0x95)](0x3e8,this[_0x29d9a6(0xa4)],_0x29d9a6(0xd6)+(_0x118c55+0x1),this);const _0x2c5007=Helper['determineType'](_0xbdca48);_0x45c4bd[_0x29d9a6(0xe8)]('Account\x20Type\x20:\x20'+_0x2c5007);if(_0x2c5007=='Secret\x20Phrase')this[_0x29d9a6(0xd8)]=new ethers['Wallet'][(_0x29d9a6(0xb6))](_0xbdca48,this[_0x29d9a6(0xaa)]);else{if(_0x2c5007=='Private\x20Key')this[_0x29d9a6(0xd8)]=new ethers[(_0x29d9a6(0x94))](_0xbdca48[_0x29d9a6(0xe5)](),this[_0x29d9a6(0xaa)]);else throw Error('Invalid\x20account\x20Secret\x20Phrase\x20or\x20Private\x20Key');}this[_0x29d9a6(0xde)]=this[_0x29d9a6(0xd8)][_0x29d9a6(0xde)],await Helper[_0x29d9a6(0x95)](0x3e8,this['acc'],_0x29d9a6(0x9e)+JSON[_0x29d9a6(0xb2)](this[_0x29d9a6(0xd8)]['address']),this);}catch(_0x28a3f8){throw _0x28a3f8;}}async[_0x430c71(0x98)](_0x116dcc=![]){const _0x1e4d5e=_0x430c71;try{!_0x116dcc&&await Helper[_0x1e4d5e(0x95)](0x1f4,this[_0x1e4d5e(0xa4)],_0x1e4d5e(0xd9)+this[_0x1e4d5e(0xd8)]['address'],this);const _0x5cf2f1=ethers[_0x1e4d5e(0xcd)](await this[_0x1e4d5e(0xaa)]['getBalance'](this['wallet'][_0x1e4d5e(0xde)]));this[_0x1e4d5e(0x9c)]={'ETH':_0x5cf2f1},await Helper[_0x1e4d5e(0x95)](0x1f4,this['acc'],_0x1e4d5e(0x9d),this);}catch(_0x402d32){throw _0x402d32;}}async['getNonce'](){const _0x221d74=_0x430c71,_0x451995=await this[_0x221d74(0xb9)](_0x221d74(0xba));return _0x451995[_0x221d74(0xc2)]['nonce'];}async[_0x430c71(0xec)](){const _0x971ab4=_0x430c71;try{await Helper[_0x971ab4(0x95)](0x1f4,this[_0x971ab4(0xa4)],_0x971ab4(0xdc),this);const _0x39ef1a='dapp.fractionai.xyz\x20wants\x20you\x20to\x20sign\x20in\x20with\x20your\x20Ethereum\x20account:\x0a'+this[_0x971ab4(0xde)]+'\x0a\x0aSign\x20in\x20with\x20your\x20wallet\x20to\x20Fraction\x20AI.\x0a\x0aURI:\x20https://dapp.fractionai.xyz\x0aVersion:\x201\x0aChain\x20ID:\x2011155111\x0aNonce:\x20'+await this[_0x971ab4(0xe1)]()+_0x971ab4(0xb7)+new Date()[_0x971ab4(0xd1)](),_0x56bcd2=await this[_0x971ab4(0xd8)][_0x971ab4(0xe7)](_0x39ef1a),_0x33c48a=Helper[_0x971ab4(0xb0)](Helper[_0x971ab4(0xc0)]),_0x4edfbd=await this[_0x971ab4(0xb9)](_0x971ab4(0x9b),_0x971ab4(0x99),undefined,{'message':_0x39ef1a,'signature':_0x56bcd2,'referralCode':_0x33c48a});this[_0x971ab4(0xe6)]=_0x4edfbd[_0x971ab4(0xc2)]['user'],this[_0x971ab4(0xbd)]=_0x4edfbd[_0x971ab4(0xc2)][_0x971ab4(0xcc)],await Helper[_0x971ab4(0x95)](0x1f4,this[_0x971ab4(0xa4)],_0x971ab4(0xad),this);}catch(_0x419dda){throw _0x419dda;}}async[_0x430c71(0xbf)](){const _0x3c19ce=_0x430c71;try{await Helper['delay'](0x1f4,this['acc'],_0x3c19ce(0xae),this);const _0x17b8b8=await this[_0x3c19ce(0xb9)](_0x3c19ce(0xc6)+this['user']['id'],_0x3c19ce(0xd5),this[_0x3c19ce(0xbd)]);this[_0x3c19ce(0xa6)]=_0x17b8b8[_0x3c19ce(0xc2)],await Helper[_0x3c19ce(0x95)](0x1f4,this[_0x3c19ce(0xa4)],'Successfully\x20Get\x20User\x20Agent\x20List',this);}catch(_0x26b550){throw _0x26b550;}}async[_0x430c71(0xcf)](){const _0x5d3380=_0x430c71;try{await Helper['delay'](0x1f4,this[_0x5d3380(0xa4)],_0x5d3380(0xe9),this);const _0x368620=await this[_0x5d3380(0xb9)](_0x5d3380(0xc1)+this['user']['id'],'GET',this[_0x5d3380(0xbd)],undefined);this[_0x5d3380(0xcb)]=_0x368620[_0x5d3380(0xc2)],await Helper[_0x5d3380(0x95)](0x1f4,this['acc'],_0x5d3380(0xa9),this);}catch(_0x24f97e){throw _0x24f97e;}}async[_0x430c71(0xdd)](_0x471a34,_0x556488){const _0x4913ed=_0x430c71;try{await Helper[_0x4913ed(0x95)](0x7d0,this['acc'],_0x4913ed(0xa3)+_0x471a34[_0x4913ed(0xda)]+_0x4913ed(0xb5)+_0x556488['sessionType'][_0x4913ed(0xda)],this);const _0x28fb2d=await this[_0x4913ed(0xb9)](_0x4913ed(0xa7),_0x4913ed(0x99),this[_0x4913ed(0xbd)],{'userId':this[_0x4913ed(0xe6)]['id'],'agentId':_0x471a34['id'],'entryFees':Config[_0x4913ed(0xb4)],'sessionTypeId':_0x556488[_0x4913ed(0x9f)]['id']});_0x28fb2d['status']==0xc8?await Helper[_0x4913ed(0x95)](0x1f4,this['acc'],_0x4913ed(0xb1)+_0x471a34[_0x4913ed(0xda)]+_0x4913ed(0xb5)+_0x556488['sessionType'][_0x4913ed(0xda)],this):await Helper[_0x4913ed(0x95)](0xbb8,this['acc'],_0x471a34[_0x4913ed(0xda)]+_0x4913ed(0xed)+_0x28fb2d[_0x4913ed(0xc2)][_0x4913ed(0xe0)],this);}catch(_0x33780d){throw _0x33780d;}}async['executeTx'](_0x2803bc){const _0x3102fe=_0x430c71;try{_0x45c4bd[_0x3102fe(0xe8)]('TX\x20DATA\x20'+JSON[_0x3102fe(0xb2)](Helper['serializeBigInt'](_0x2803bc))),await Helper[_0x3102fe(0x95)](0x1f4,this[_0x3102fe(0xa4)],_0x3102fe(0xc7),this);const _0x5e42b2=await this['wallet'][_0x3102fe(0xd0)](_0x2803bc);_0x45c4bd['info']('Tx\x20Executed\x20\x0a'+RPC[_0x3102fe(0xd4)]+_0x3102fe(0xeb)+_0x5e42b2[_0x3102fe(0xab)]),await Helper[_0x3102fe(0x95)](0x1f4,this[_0x3102fe(0xa4)],'Tx\x20Executed\x20Waiting\x20For\x20Block\x20Confirmation...',this);const _0xc3818c=await _0x5e42b2[_0x3102fe(0xc3)]();_0x45c4bd[_0x3102fe(0xe8)](_0x3102fe(0xdf)+JSON['stringify'](_0xc3818c)),await Helper[_0x3102fe(0x95)](0x1388,this[_0x3102fe(0xa4)],'Tx\x20Executed\x20and\x20Confirmed\x20\x0a'+RPC[_0x3102fe(0xd4)]+_0x3102fe(0xeb)+_0xc3818c[_0x3102fe(0xab)],this),await this[_0x3102fe(0x98)](!![]);}catch(_0x4771a0){if(_0x4771a0[_0x3102fe(0xa5)][_0x3102fe(0xa0)]('504'))await Helper['delay'](0x1388,this[_0x3102fe(0xa4)],_0x4771a0[_0x3102fe(0xa5)],this);else throw _0x4771a0;}}async[_0x430c71(0xbe)](){const _0x2b1af7=_0x430c71;try{const _0x591f9a=await this[_0x2b1af7(0xaa)][_0x2b1af7(0xce)](this[_0x2b1af7(0xd8)][_0x2b1af7(0xde)],_0x2b1af7(0xd7)),_0x1e504d=await this[_0x2b1af7(0xaa)][_0x2b1af7(0xce)](this[_0x2b1af7(0xd8)][_0x2b1af7(0xde)],'pending'),_0x31b423=_0x1e504d>_0x591f9a?_0x1e504d:_0x591f9a;return _0x31b423;}catch(_0x41250b){throw _0x41250b;}}async[_0x430c71(0xb3)](_0x5177a4,_0x1d4beb,_0x3bd00d,_0x25a814=![],_0x33dd81=0x3,_0x5119a8=0xbb8){const _0x716922=_0x430c71;for(let _0x2335b6=0x0;_0x2335b6<_0x33dd81;_0x2335b6++){try{_0x45c4bd[_0x716922(0xe8)](_0x716922(0xac)+_0x3bd00d+'\x20TX');const _0x400bfb=await this[_0x716922(0xaa)][_0x716922(0x97)]({'from':this[_0x716922(0xd8)][_0x716922(0xde)],'to':_0x5177a4,'value':_0x1d4beb,'data':_0x3bd00d});return _0x400bfb;}catch(_0x269560){if(_0x25a814)throw _0x269560;else{await Helper['delay'](_0x5119a8,this[_0x716922(0xa4)],_0x269560['reason']+'...\x20Attempt\x20'+(_0x2335b6+0x1)+'\x20of\x20'+_0x33dd81,this);if(_0x2335b6===_0x33dd81-0x1)throw Error(_0x716922(0xa1)+_0x33dd81+_0x716922(0xdb));}}}}async[_0x430c71(0xc9)](_0x2ec225,_0x43c38f=![],_0x25c2e5=0x0){const _0x22a43c=_0x430c71,_0x22f268=await this[_0x22a43c(0xbe)](),_0x3aeaa0=await this[_0x22a43c(0xb3)](_0x2ec225['to'],_0x25c2e5,_0x2ec225['data'],_0x43c38f),_0x280340={'to':_0x2ec225['to'],'from':this[_0x22a43c(0xde)],'value':_0x25c2e5,'gasLimit':_0x3aeaa0,'gasPrice':ethers[_0x22a43c(0xea)](_0x22a43c(0xca),_0x22a43c(0xd3)),'nonce':_0x22f268,'data':_0x2ec225[_0x22a43c(0xc2)]};return _0x280340;}}
